$ ->
  recentThoughtWallsLink.click (event) ->
    toggleVisibilityOfRecentThoughtWallsDiv()
    updateRecentThoughtWallsDiv()
  focusOnNewThoughtText()
  
  $("body").delegate ".thought-history-link", "click", (event) ->
    toggleThoughtHistoryDisplay(this.getAttribute("id").split("-")[2])
  
  $("body").delegate "#thought_text", "keyup", (event) ->
    $('#thought-new-remaining-characters').html('remaining: ' + (maxThoughtLength - $('#thought_text').val().length))
        
  thoughtWallTitleInput.keyup ->
    $("#update_thought_wall_spinner").show()
    $("#collection-name").html($(this).val())
    delayAction (->
      $(".edit_thought_wall").submit()
      $("#update_thought_wall_spinner").hide()
    ), 100
    false
    
  $(document).ready ->
    $('#thought-list').sortable({stop: (event, ui) ->
      console.log ui.item[0].getAttribute("id")
      thoughtBoxIdParts = ui.item[0].getAttribute("id").split('-')
      backendID = thoughtBoxIdParts[thoughtBoxIdParts.length-1]
      console.log ui.item.index()
      $.ajax({
        type: "POST",
        url: '/thoughts/'+backendID+'.js',
        data: { _method:'PUT', thought: { ui_position: ui.item.index() } },
        dataType: 'javascript',
        success: (msg) ->
          console.log("Data Saved: " + msg)
      })
    })