window.delayAction = (->
  timer = 0
  (callback, ms) ->
    clearTimeout timer
    timer = setTimeout(callback, ms)
)()

window.supportsHtml5Storage = ->
  return !!window.localStorage

window.updateStarDisplay = (newValue) ->
  $('#star-thought-wall-link').text(newValue)

window.updatePageTitle = (title) ->
  $('title').html(title)
  
window.removeDuplicateIdsAmong = (selector) ->
  elements = $(selector)
  elements.each( (index, element) ->
    currentId = element.id
    searchIndex = index+1
    while (searchIndex < elements.length)
      if (elements[searchIndex].id is currentId)
        elements[searchIndex].className += " duplicate"
        
      searchIndex++
      
    $('.duplicate').remove()
  )

window.indexOfMaxPositiveValue = (values) ->
  highestValue = -1
  highestValueIndex = -1
  
  i = 0
  while i < values.length
    if values[i] > highestValue
      highestValue = values[i]
      highestValueIndex = i
    i++
      
  return highestValueIndex